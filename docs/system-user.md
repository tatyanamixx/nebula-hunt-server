# Системный пользователь

## Описание

Системный пользователь - это специальный пользователь с ID `-1` и ролью `SYSTEM`, который создается автоматически при первой регистрации любого пользователя в системе. Он предназначен для обеспечения целостности базы данных.

## Характеристики

-   **ID**: -1
-   **Username**: SYSTEM
-   **Role**: SYSTEM
-   **Referral**: 0
-   **Blocked**: false

## Автоматическое создание

Системный пользователь создается автоматически при первой регистрации любого пользователя в системе. Это происходит в методе `registration` в `user-service.js`.

### Логика создания

1. При регистрации пользователя проверяется общее количество пользователей в базе данных
2. Если количество пользователей равно 0 (первая регистрация), создается системный пользователь
3. Системный пользователь создается только в таблице `user`

## API Endpoints

### Получение системного пользователя

```
GET /api/auth/system-user
```

**Требования:**

-   Авторизация через TMA middleware

**Ответ:**

```json
{
	"id": -1,
	"username": "SYSTEM",
	"referral": 0,
	"role": "SYSTEM",
	"blocked": false
}
```

## Использование

Системный пользователь используется для:

1. **Обеспечения целостности БД** - гарантирует наличие базовой структуры данных
2. **Справочных данных** - хранение системной информации
3. **Автоматических процессов** - выполнение автоматизированных действий

## Безопасность

-   Системный пользователь имеет роль SYSTEM, что не дает ему административных прав
-   Доступ к информации о системном пользователе ограничен авторизованными пользователями
-   Системный пользователь не может быть заблокирован через обычные механизмы блокировки

## Примечания

-   Системный пользователь создается только один раз при первой регистрации
-   Если системный пользователь уже существует, повторное создание не происходит
-   Системный пользователь создается только в таблице `user` без связанных данных
-   Системный пользователь не имеет административных функций и предназначен только для обеспечения целостности БД
